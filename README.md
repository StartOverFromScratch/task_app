# タスク管理システム 要件定義書 (Draft v0.1)

---

## 1. プロジェクト概要

### 1.1 目的

定期・不定期タスクおよび大規模タスクの分割管理を行い、

* 実行漏れを防ぐ
* 「やったかどうか不明」をなくす
* 終わらないタスクを構造的に処理する
* 探索が広がりすぎることを制御する

ことを目的とする。

---

### 1.2 対象ユーザー

* 個人利用（単一ユーザー）

---

### 1.3 背景コンテキスト（重要）

本システムは、以下の思考特性を前提に設計されている。

#### ユーザーの思考特性

* 調査・探索が得意で楽しい（A 60%）
* 思考が分岐しやすい（C 40%）
* 不安型ではない（Bは少）
* 完璧主義ではないが「ゴールが曖昧だと終われない」
* 構造がシンプルになった瞬間に決断できる
* 可逆な決定であっても不可逆のように感じ、探索が長引く傾向がある

#### 設計思想

* 「最適解探索」ではなく「構造収束」で止める
* 可逆なら仮決定で良いという思想を明示的に組み込む
* 調査→決定→実行を分離する
* 終了条件（Definition of Done）を必須化する
* 探索の終了条件（件数制限）を明示する

---

## 2. スコープ

### IN

* タスク登録
* 成果物ベース分割（親子構造）
* 完了条件（1行DoD）
* 任意チェックリスト
* 決定基準（decision_criteria）
* 可逆判定（reversible）
* 探索件数上限（exploration_limit）
* 完了ログ保持
* 繰り越し候補管理（手動確定）
* 放置検知（最終更新日ベース）
* 要再定義フロー
* CaptureBox（探索分岐逃し箱）

### OUT（v0.1では作らない）

* チーム共有
* 外部連携
* 通知機能
* 高度な分析
* 認証の高度化

---

## 3. 機能要件

### 3.1 タスクタイプ

* research（調査）
* decision（決定）
* execution（実行）

---

### 3.2 ユーザーストーリー

| # | As a | I want to              | So that       |
| - | ---- | ---------------------- | ------------- |
| 1 | 自分   | タスクを登録したい              | 管理対象を明確にする    |
| 2 | 自分   | 完了条件を1行で定義したい          | 終了基準を曖昧にしない   |
| 3 | 自分   | 大きなタスクを子タスクに分割したい      | 計画的に進めたい      |
| 4 | 自分   | 調査終了条件を設定したい           | 無限探索を防ぐ       |
| 5 | 自分   | 決定基準を書きたい              | 仮決定で止まれるようにする |
| 6 | 自分   | 完了ログを残したい              | 実行証拠を保持する     |
| 7 | 自分   | 期限超過タスクを繰り越し候補として確認したい | 手動で判断する       |
| 8 | 自分   | 放置タスクを検知したい            | 終わらないタスクを処理する |
| 9 | 自分   | 実行中の分岐論点を逃したい          | 今の作業に集中する     |

---

## 4. 優先順位（MVP）

| 機能         | Must   | MVP |
| ---------- | ------ | --- |
| タスクCRUD    | ✓      | ✓   |
| 完了条件（1行）   | ✓      | ✓   |
| 子タスク       | ✓      | ✓   |
| 完了ログ       | ✓      | ✓   |
| 可逆判定       | ✓      | ✓   |
| 探索上限       | ✓      | ✓   |
| 放置検知       | ✓      | ✓   |
| 繰り越し候補     | ✓      | ✓   |
| CaptureBox | Should | ✓   |
| チェックリスト    | Should | ✓   |

---

## 5. データモデル

### tasks

* id
* title
* task_type (research / decision / execution)
* category
* priority (must / should)
* status (todo / doing / done / carryover_candidate / needs_redefine / snoozed)
* due_date
* parent_id
* done_criteria
* decision_criteria
* reversible (bool)
* exploration_limit (int)
* last_updated_at
* created_at

---

### task_checklist_items

* id
* task_id
* text
* is_done
* order_no

---

### completion_logs

* id
* task_id
* completed_at
* note

---

### capture_items

* id
* related_task_id
* text
* created_at
* is_resolved

---

## 6. 状態遷移

未着手 → 進行中 → 完了
　　　↘
　　　 要再定義 → 進行中
　　　↘
　　　 保留 → 未着手

期限超過 → 繰り越し候補 →（手動確定）→ 未着手

---

## 7. 放置検知ルール

基準：last_updated_at

* Must：7日
* Should：21日

---

## 8. 繰り越し仕様

期限超過タスクは carryover_candidate へ。

操作ボタンは固定：

* 今日やる
* +2日
* +7日
* 要再定義

---

## 9. 決定設計（探索収束プロトコル）

調査タスクには以下を必須：

* exploration_limit（例：3）
* reversible確認
* decision_criteria（合格基準）

終了条件：

* 選択肢が3つ以内
* 構造が単純化された
* 可逆であると確認できた

---

## 10. アーキテクチャ

* Frontend：Nuxt 3
* Backend：FastAPI
* DB：SQLite（将来RDBへ移行可能）
* 単一ユーザー前提

---

## 11. 将来拡張

* Web→Mobile対応
* JWT認証
* タスク分析
* チーム共有化

---

# コンテキストサマリー（設計思想）

本システムは単なるタスク管理ではない。

目的は：

* 構造が閉じると決断できる思考特性を活かす
* 可逆決定で止まれるようにする
* 無限探索を件数制限で収束させる
* 終了条件を明示し、未決定状態をなくす

これは

> 「最適解探索」から「構造収束型実行」への移行

を支援するシステムである。
